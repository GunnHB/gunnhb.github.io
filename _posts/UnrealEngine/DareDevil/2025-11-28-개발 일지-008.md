---
title: "[UnrealEngine][DareDevil] ê°œë°œ ì¼ì§€ - 008"
description: 2025ë…„ 11ì›” 28ì¼ ê°œë°œ ì¼ì§€
date: 2025-11-28 00:00:00 +09:00
categories: [GameDev, UnrealEngine, DevNote]
tags:
  [
    UnrealEngine,
    C++,
  ]
---

![](/assets/img/post/Daredevil/Daredevil.png){: width="600" height="400" }

## ğŸ’» ê°œìš”

- Freeflow ì „íˆ¬ ì‹œìŠ¤í…œ êµ¬í˜„

## ğŸ¤” ì‘ì—… ë‚´ìš©

ê²Œì„ì˜ ì „íˆ¬ëŠ” **Freeflow** ë°©ì‹ì„ ì‚¬ìš©í•˜ê³ ì í–ˆë‹¤. ì´ë¥¼ ìœ„í•´ ìš°ì„  ì  ìºë¦­í„°ë¥¼ ë§Œë“¤ì—ˆë‹¤.

```c++
UCLASS()
class DAREDEVIL_API ADaredevilEnemyCharacter : public ADaredevilBaseCharacter
{
	GENERATED_BODY()
	
};
```

> ì ì´ë¼ê³  í¬ì¥í–ˆì§€ë§Œ ì‚¬ì‹¤ ì•„ë¬´ ê¸°ëŠ¥ ì—†ëŠ” ê»ë°ê¸°ì— ë¶ˆê³¼í•˜ë‹¤ğŸ˜‘

ê·¸ëŸ° ë‹¤ìŒ í”Œë ˆì´ì–´ ìºë¦­í„°ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìŠ¤ì¼ˆë ˆíƒˆ ë©”ì‹œë¥¼ ì„¤ì •í•˜ê³  ë§µì— ë°°ì¹˜í–ˆë‹¤.

![](/assets/img/post/Daredevil/Freeflow/enemy_at_map.png){: width="600" height="400" }

ê·¸ë¦¬ê³  ë³¸ê²©ì ìœ¼ë¡œ ì „íˆ¬ ì‹œìŠ¤í…œì„ êµ¬í˜„í–ˆë‹¤. Freeflow ì‹œìŠ¤í…œì€ ì£¼ë³€ì˜ ì ë“¤ì„ ë¬¼ íë¥´ ë“¯ ì´ë™í•˜ë©° ê³µê²©í•˜ëŠ” ì‹œìŠ¤í…œì´ë‹¤. ê·¸ë ‡ê¸°ì— ìš°ì„  ì£¼ë³€ ì  íƒìƒ‰ ë¡œì§ì„ êµ¬í˜„í–ˆë‹¤.

```c++
APawn* UDaredevilFreeFlowComponent::GetBestTarget() const
{
	FVector SphereLocation = BaseCharacter->GetMesh()->GetComponentLocation();

	TArray<TEnumAsByte<EObjectTypeQuery>> ObjectTypes;
	ObjectTypes.Add(UEngineTypes::ConvertToObjectType(ECC_Pawn));

	// ì£¼ë³€ ì  íƒì§€
	TArray<AActor*> OutActors;
	UKismetSystemLibrary::SphereOverlapActors(GetWorld(), SphereLocation, SphereRadius, ObjectTypes, nullptr, ActorsToIgnore, OutActors);

  // ...
}
```

ê³µê²©ì´ ì‹œì‘ë˜ë©´ ìºë¦­í„°ê°€ ì„œìˆëŠ” ì§€ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì¼ì • ë°˜ê²½ ë‚´ì˜ ì ì„ íƒì§€í•˜ë„ë¡ í–ˆë‹¤.

```c++
APawn* UDaredevilFreeFlowComponent::GetBestTarget() const
{
  // ...

  float MinDistSq = FLT_MAX;
  APawn* BestTarget = nullptr;
  
  for (AActor* Actor : OutActors)
  {
      if (Actor == nullptr)
          continue;

      float DistSq = FVector::DistSquared(Actor->GetActorLocation(), OwnerLocation);
      if (DistSq < MinDistSq)
      {
          MinDistSq = DistSq;
          BestTarget = Cast<APawn>(Actor);    
      }
  }

  return BestTarget;
}
```

ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ì–»ì€ ì•¡í„°(ì )ë“¤ ì¤‘ ê°€ì¥ ê°€ê¹Œìš´ ì•¡í„°ë¥¼ ë°˜í™˜í•˜ê³ ì í–ˆë‹¤.

ì´ì œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì•¼ í•œë‹¤. GAì—ì„œ ì»´í¬ë„ŒíŠ¸ì— ë°”ë¡œ ì ‘ê·¼í•´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ìˆ˜ë„ ìˆì—ˆì§€ë§Œ, ê·¸ë ‡ê²Œ ë˜ë©´ ê²°í•©ë ¥ì´ ê°•í•´ì ¸ ì¢‹ì§€ ì•Šì„ ê²ƒìœ¼ë¡œ íŒë‹¨í•´ **ì¸í„°í˜ì´ìŠ¤**ë¥¼ ì‚¬ìš©í–ˆë‹¤.

```c++
class DAREDEVIL_API ICombatInterface
{
	GENERATED_BODY()

	// Add interface functions to this class. This is the class that will be inherited to implement this interface.
public:
	UFUNCTION(BlueprintNativeEvent, BlueprintCallable)
	APawn* GetBestTarget() const;
};
```

`CombatInterface`ë¥¼ ë§Œë“¤ì–´ `GetBestTarget`ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤. í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ëŠ” **í”Œë ˆì´ì–´ ìºë¦­í„°ì—ì„œ ìƒì†**ë°›ì•„ í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ê³ , **GA ë¸”ë£¨í”„ë¦°íŠ¸ì—ì„œ í˜¸ì¶œ**í•˜ê³ ì í–ˆë‹¤.

```c++
class DAREDEVIL_API ADaredevilHeroCharacter : public ADaredevilBaseCharacter, public ICombatInterface
{
  // ...

  virtual APawn* GetBestTarget_Implementation() const override;
}
```

![](/assets/img/post/Daredevil/Freeflow/combat_interface.png){: width="600" height="400" }
_ë¸”ë£¨í”„ë¦°íŠ¸ì—ì„œ ì¸í„°í˜ì´ìŠ¤ í•¨ìˆ˜ í˜¸ì¶œ_

ê·¸ëŸ° í”Œë ˆì´ì–´ê°€ ì  ë°©í–¥ìœ¼ë¡œ ì´ë™í•˜ë©´ì„œ ê³µê²©ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. ì´ ì—­ì‹œ íŒŒì¿ ë¥´ì™€ ë§ˆì°¬ê°€ì§€ë¡œ ëª¨ì…˜ ì›Œí•‘ì„ í†µí•´ ìì—°ìŠ¤ëŸ½ê²Œ ì´ë™í•˜ë„ë¡ í–ˆë‹¤.

![](/assets/img/post/Daredevil/Freeflow/motion_warping_logic.png){: width="600" height="400" }
_ê³µê²© ëª½íƒ€ì£¼ê°€ ì§„í–‰ë˜ëŠ” ì¤‘ ì  ë°©í–¥ìœ¼ë¡œ ì´ë™_

ì´ë ‡ê²Œ ë˜ë©´ ê½¤ë‚˜ ìì—°ìŠ¤ëŸ½ê²Œ ê³µê²©ê³¼ ë™ì‹œì— ì ì— ê°€ê¹Œì›Œì§€ê²Œ ëœë‹¤.

## ğŸ’¡ ìƒˆë¡­ê²Œ ë°°ìš´ ì 

- Freeflow ì „íˆ¬ êµ¬í˜„ ë°©ë²•

## ğŸš€ ë‹¤ìŒ ëª©í‘œ

- Freeflow ì „íˆ¬ ê°œì„ 