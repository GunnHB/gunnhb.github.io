---
title: "[UnrealEngine][DareDevil] 개발 일지 - 003"
description: 2025년 10월 14일 개발 일지
date: 2025-10-14 00:00:00 +09:00
categories: [GameDev, UnrealEngine, DevNote]
tags:
  [
    UnrealEngine,
    C++,
  ]
---

![](/assets/img/post/Daredevil/Daredevil.png){: width="600" height="400" }

## 💻 개요

- 캐릭터 클래스 구조 설계 및 캐릭터 이동 구현

## 🤔 작업 내용

프로젝트의 캐릭터들의 클래스 구조를 설계하고 구현했다. 우선 캐릭터는 `BaseCharacter`를 기반으로 `HeroCharacter`와 `EnemyCharacter`로 나눠 진행하도록 했다. 또한 GAS를 사용할 계획이기 때문에 베이스 클래스에서 `IAbilitySystemInterface`를 상속받아 어빌리티 시스템을 구현하고자 했다.

```c++
UCLASS()
class DAREDEVIL_API ADaredevilBaseCharacter : public ACharacter, public IAbilitySystemInterface
{
  // ...
};
```

![](/assets/img/post/Daredevil/CharacterSettings/set-player-mesh.png){: width="500" height="400"}
_플레이어 캐릭터 매시의 경우 이전에 추가했던 것으로 연결했다_

캐릭터와 카메라 이동의 경우 데이터 에셋을 활용했다. 물론 플레이어의 BP에 직접 MappingContext와 InputAction을 연결할 수 있지만, BP를 직접 수정하는 것을 최소화하고자 했다. 

![](/assets/img/post/Daredevil/CharacterSettings/input-data-asset.png)
_데이터 에셋을 통해 MappingContext와 InputAction을 연결했다_

GAS는 GameplayTag와 함께 사용하는 경우가 많기 때문에 용도에 맞는 태그를 만들어줘야 한다. 이를 코드에서 처리하기 위해 `DaredevilGameplayTags`를 새로 만들어 추가했다.

```c++
// DaredevilGameplayTags.h
namespace DaredevilGameplayTags
{
	DAREDEVIL_API UE_DECLARE_GAMEPLAY_TAG_EXTERN(InputTag_Move);
	DAREDEVIL_API UE_DECLARE_GAMEPLAY_TAG_EXTERN(InputTag_Look);
}

// DaredevilGameplayTags.cpp
namespace DaredevilGameplayTags
{
	 UE_DEFINE_GAMEPLAY_TAG(InputTag_Move, "InputTag.Move");
	 UE_DEFINE_GAMEPLAY_TAG(InputTag_Look, "InputTag.Look");
}
```

![](/assets/img/post/Daredevil/CharacterSettings/added-gameplay-tag.png)
_코드로 추가됐다_

마지막으로 애니메이션을 재생하기 위한 `AnimInstance`를 만들었다. 이 역시 `BaseAnimInstance`를 기반으로 `CharacterAnimInstance`->`HeroAnimInstance`의 관계로 만들었다. 이를 활용해 ABP를 만들어 플레이어에 연결시켰다.

![](/assets/img/post/Daredevil/CharacterSettings/apply-animinstance.png){: width="500" height="400"}
_애니메이션을 적용시킨 플레이어 캐릭터_

그런데 하나 문제가 발생했다. 이동 애니메이션의 경우 **자체에서 매시를 이동**시켜버렸다.

![](/assets/img/post/Daredevil/CharacterSettings/move-the-mesh-from-the-animation-itself.png){: width="500" height="400"}
_몸만 돌진해버리는..._

구글링 결과 `리타기터`에서 root의 트랜슬레이션 모드를 `Globally Scaled`로 변경해주면 된다고 해 설정 후 다시 애니메이션을 추출해줬다.

![](/assets/img/post/Daredevil/CharacterSettings/changed-translation-mode.png){: width="500" height="400"}
_변경된 트랜슬레이션 모드_

이후 이동 애니메이션의 루트 모션 옵션 중 **루트 강제 잠금**을 활성화했더니 이슈가 해결됐다.

![](/assets/img/post/Daredevil/CharacterSettings/modifying-root-motion.png){: width="500" height="400"}
_수정된 애니메이션_

## 💡 새롭게 배운 점

- 코드를 통한 게임플레이 태그 추가
- 리타깃을 통해 추출한 애니메이션의 루트 모션 이슈를 해결하는 방법

## 🚀 다음 목표

- Foot IK 구현