---
title: "[UnrealEngine][DareDevil] 개발 일지 - 007"
description: 2025년 11월 19일 개발 일지
date: 2025-11-19 00:00:00 +09:00
categories: [GameDev, UnrealEngine, DevNote]
tags:
  [
    UnrealEngine,
    C++,
  ]
---

![](/assets/img/post/Daredevil/Daredevil.png){: width="600" height="400" }

## 💻 개요

- 장애물에 따른 다른 애니메이션 재생

## 🤔 작업 내용

앞서 플레이어의 앞에 놓인 장애물의 여러 정보를 얻는 로직을 구현했다. 이를 기반으로 어떤 애니메이션을 재생하면 된다.

우선 데이터 테이블을 이용해 각 액션에 따른 최대/최소 높이와 게임플레이 태그를 지정했다.

![](/assets/img/post/Daredevil/Parkour/parkour_rule.png){: width="600" height="400" }

그 후 컴포넌트에 해당 데이터 테이블을 연결 후 장애물의 높이와 폭에 따라 다른 태그를 반환하는 함수를 추가했다.

```c++
FGameplayTag UDaredevilParkourComponent::GetContextGameplayTag(float InWallHeight, float InDepth)
{
	if (AllParkourRule.IsEmpty())
		return FGameplayTag::EmptyTag;

	for (const FParkourRule* Rule : AllParkourRule)
	{
		if (Rule == nullptr)
			continue;

		if (Rule->MaxHeight > 0.f && InWallHeight > Rule->MaxHeight)
			continue;

		if (Rule->MinHeight > 0.f && InWallHeight < Rule->MinHeight)
			continue;

		if (Rule->MaxDepth > 0.f && InDepth > Rule->MaxDepth)
			continue;

		if (Rule->MinDepth > 0.f && InDepth < Rule->MinDepth)
			continue;

		return Rule->ContextGameplayTag;
	}

	return FGameplayTag::EmptyTag;
}
```

위 함수를 통해 전달받은 태그가 플레이어에 추가되면 GA를 활성화할 준비가 완료된다.

그 후 파쿠르 GA를 만든다. 모든 파쿠르는 동일한 로직으로 수행되기 때문에 베이스 GA를 만든 후 각 액션에 따른 파생 GA를 만드는 방식으로 진행했다.

![](/assets/img/post/Daredevil/Parkour/ability_trigger.png){: width="600" height="400" }
_베이스 GA의 어빌리티 트리거_

GA 활성화 조건으로 액터에 특정 태그가 부여된 상태일 때로 지정했다. 이렇게 하면 따로 호출해주지 않아도 바로 활성화가 가능해진다.

![](/assets/img/post/Daredevil/Parkour/ability_collision_movement.png){: width="600" height="400" }

파쿠르 애니메이션을 통해 플레이어가 장애물을 넘어가지 위해서는 두 가지의 옵션을 수행해야 한다. 먼저 `Capsule Component`의 `Collision Type`을 `No Collision`으로 설정하여 오브젝트와의 충돌을 무시한다. 그 후 `Character Movement Component`의 `Movement Type`을 `Flying`으로 세팅하여 미끄러지 듯이 이동하도록 한다. 해당 노드를 수행한 뒤 몽타주를 재생하면 된다.

> 당연한 말이지만 몽타주 재생이 끝나면 옵션들을 다시 되돌려야 한다😅
{: .prompt-info}

그런 다음 `Motion Warping`을 이용해 뛰어 넘는 순간의 위치를 조정한다. 그렇지 않으면 짚는 손의 위치가 허공에 뜨게 되어 굉장히 어색해진다.

![](/assets/img/post/Daredevil/Parkour/ability_motion_warping.png){: width="600" height="400" }

GA 내부에서는 장애물 방향과 조정한 위치 값을 `Add of Update Warp Target From Location and Rotation` 노드에 연결해주면 된다. 그리고 몽타주에서는 `Motion Warping` 노티파이를 추가해주면 된다.

![](/assets/img/post/Daredevil/Parkour/motion_warping_notify.png){: width="600" height="400" }

최종 결과는 다음과 같다

{% include embed/youtube.html id='R2y599Ps36E' %}

## 💡 새롭게 배운 점

- 데이터 테이블을 이용한 로직 정리
- 모션 워핑 사용 방법

## 🚀 다음 목표

- 전투 시스템 기본 로직 정리

## 🔗 참고

[취미로 언리얼(Unreal as a hobby)::파쿠르 시스템](https://youtu.be/N2A5hjpVx9k?si=XLH3Iog7UlN-yT3a)