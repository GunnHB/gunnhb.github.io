---
title: "[UnrealEngine][DareDevil] ê°œë°œ ì¼ì§€ - 006"
description: 2025ë…„ 11ì›” 12ì¼ ê°œë°œ ì¼ì§€
date: 2025-11-12 00:00:00 +09:00
categories: [GameDev, UnrealEngine, DevNote]
tags:
  [
    UnrealEngine,
    C++,
  ]
---

![](/assets/img/post/Daredevil/Daredevil.png){: width="600" height="400" }

## ğŸ’» ê°œìš”

- íŒŒì¿ ë¥´ êµ¬í˜„ì„ ìœ„í•œ ì¥ì• ë¬¼ ê°ì§€ ë° ë¶„ì„ ë¡œì§ êµ¬í˜„

## ğŸ¤” ì‘ì—… ë‚´ìš©

íŒŒì¿ ë¥´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë¡œì§ì˜ êµ¬í˜„ì´ í•„ìš”í•˜ë‹¤.

- ë²½/ì¥ì• ë¬¼ ê°ì§€
- ê°ì§€ë¥¼ í†µí•´ ì–»ì€ ì •ë³´ ë¶„ì„

ìš°ì„  SphereTraceë¥¼ í†µí•´ ì•¡í„° ì•ì— ì¥ì• ë¬¼ì„ ê°ì§€í•˜ë„ë¡ í–ˆë‹¤.

```c++
FVector MinUpward = UDaredevilFunctionLibrary::NativeMoveVectorUpward(BaseCharacter->GetMesh()->GetComponentLocation(), DetectWallMinHeight);
FVector MaxUpward = UDaredevilFunctionLibrary::NativeMoveVectorUpward(BaseCharacter->GetMesh()->GetComponentLocation(), DetectWallMaxHeight);

FVector MinStart = UDaredevilFunctionLibrary::NativeMoveVectorBackward(MinUpward, GetOwningPawn()->GetActorRotation(), DetectWallBackwardOffset);
FVector MinEnd = MinStart + GetOwningPawn()->GetActorForwardVector() * DetectWallDistance;

FVector MaxStart = UDaredevilFunctionLibrary::NativeMoveVectorBackward(MaxUpward, GetOwningPawn()->GetActorRotation(), DetectWallBackwardOffset);
FVector MaxEnd = MaxStart + GetOwningPawn()->GetActorForwardVector() * DetectWallDistance;

MinHeightHitResult.Reset();
MaxHeightHitResult.Reset();

UKismetSystemLibrary::SphereTraceSingle(GetWorld(), MinStart, MinEnd, DetectWallSphereRadius,
	TraceTypeQuery1, false, ActorsToIgnore,
	bDetectWallDrawDebug ? EDrawDebugTrace::ForOneFrame : EDrawDebugTrace::None, MinHeightHitResult, true);

UKismetSystemLibrary::SphereTraceSingle(GetWorld(), MaxStart, MaxEnd, DetectWallSphereRadius,
	TraceTypeQuery1, false, ActorsToIgnore,
	bDetectWallDrawDebug ? EDrawDebugTrace::ForOneFrame : EDrawDebugTrace::None, MaxHeightHitResult, true);
```

![](/assets/img/post/Daredevil/Parkour/sphere_trace.png){: width="600" height="400" }

í”Œë ˆì´ì–´ì˜ ì¢…ì•„ë¦¬ ë¶€ê·¼ê³¼ ê°€ìŠ´íŒì—ì„œ ì¶©ëŒ ì²´í¬ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì¥ì• ë¬¼ì˜ ì •ë³´ë¥¼ ì–»ê¸° ìœ„í•œ ì´ˆì„ì„ ë‹¤ì¡Œë‹¤.

ì¥ì• ë¬¼ì´ ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìœ¼ë‹ˆ ì´ì œ í•´ë‹¹ ì¥ì• ë¬¼ì˜ ë†’ì´ì™€ í­ì„ ì•Œì•„ì•¼ í–ˆë‹¤. ìš°ì„  ì¥ì• ë¬¼ì˜ ë†’ì´ë¥¼ ì–»ê¸° ì „, í•´ë‹¹ ì¥ì• ë¬¼ì´ **ë„˜ì–´ì„¤ ìˆ˜ ìˆëŠ”ì§€ë¥¼ íŒë‹¨**í•˜ê¸° ìœ„í•´ `Line Trace`ë¥¼ ì´ìš©í–ˆë‹¤.

```c++
ReversedNormal = UDaredevilFunctionLibrary::NativeReverseNormal(WallHitResult.Normal);
	
FVector Upward = UDaredevilFunctionLibrary::NativeMoveVectorUpward(WallHitResult.ImpactPoint, ScanStartHeight);
FVector Backward = UDaredevilFunctionLibrary::NativeMoveVectorBackward(Upward, ReversedNormal, ScanWallBackwardOffset);

ScanWallHitResult.Reset();
float ScanWallRemainDistance = 0.f;

for (int Index = 0; Index <= ScanWallLoopCount; Index++)
{
	FVector Start = UDaredevilFunctionLibrary::NativeMoveVectorDownward(Backward, TraceDelta * Index);
	FVector End = UDaredevilFunctionLibrary::NativeMoveVectorForward(Start, ReversedNormal, ScanWallDistance);
	
	UKismetSystemLibrary::LineTraceSingle(GetWorld(), Start, End, TraceTypeQuery1, false, ActorsToIgnore,
		bScanWallDrawDebug ? EDrawDebugTrace::ForOneFrame : EDrawDebugTrace::None, ScanWallHitResult, true, FColor::Blue);

	if (ScanWallHitResult.bBlockingHit)
		break;
}
```

ì¶©ëŒ ì •ë³´ì˜ `Normal`ì˜ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ `Line Trace`ë¥¼ ë°œì‚¬í•œë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ íŒŒì¿ ë¥´ ê°€ëŠ¥ ìµœëŒ€ ë†’ì´ì—ì„œë¶€í„° ì¶©ëŒí•œ `Sphere Trace`ì˜ `Impact` ìœ„ì¹˜ê¹Œì§€ ì¼ì • ê°„ê²©ìœ¼ë¡œ ë°œì‚¬í•œë‹¤. ë°˜ë³µë¬¸ì„ í†µí•´ `Line Trace`ë¥¼ ë°œì‚¬í•˜ë©´ì„œ ë§Œì•½ ì¶©ëŒì´ ë°œìƒí•˜ê²Œ ë˜ë©´ ë°”ë¡œ `break`ë¬¸ì„ ì‹¤í–‰í•œë‹¤.

![](/assets/img/post/Daredevil/Parkour/line_trace.png){: width="600" height="400" }
_íŒŒë€ ì„ ìœ¼ë¡œ í‘œí˜„ëë‹¤_

ìœ„ ë¡œì§ìœ¼ë¡œ `Line Trace`ë¥¼ ì‹¤í–‰í•˜ë©´ ì¥ì• ë¬¼ì˜ ëŒ€ëµì ì¸ ë†’ì´ë¥¼ í™•ì¸í•˜ë©´ì„œ ì–´ë–¤ ì•¡ì…˜ì„ ì·¨í•  ê²ƒì¸ì§€ íŒŒì•…í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ **ì •í™•í•œ ë†’ì´ì™€ í­ì„ ì¸¡ì •**í•´ì•¼ í•œë‹¤.

```c++
FVector Upward = UDaredevilFunctionLibrary::NativeMoveVectorUpward(ScanWallHitResult.ImpactPoint, InTraceDelta);
int LoopCount = InRemainDistance / (MeasureWallSphereRadius * 2) + 1;

for (int Index = 0; Index < LoopCount; ++Index)
{
	FVector Start = UDaredevilFunctionLibrary::NativeMoveVectorForward(Upward, ReversedNormal, MeasureWallSphereRadius * 2 * Index);
	FVector End = UDaredevilFunctionLibrary::NativeMoveVectorDownward(Start, InTraceDelta);

	FHitResult HitResult;

	UKismetSystemLibrary::SphereTraceSingle(GetWorld(), Start, End, MeasureWallSphereRadius,
		TraceTypeQuery1, false, ActorsToIgnore,
		bMeasureWallDrawDebug ? EDrawDebugTrace::ForOneFrame : EDrawDebugTrace::None, HitResult, true);

	// ...
}
```

ì •í™•í•œ ë†’ì´ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ì„œ ì´ë²ˆì—ëŠ” `Sphere Trace`ë¥¼ í™œìš©í–ˆë‹¤. `Line Trace`ë¥¼ í†µí•´ ì–»ì€ ì¶©ëŒ ì§€ì ì—ì„œë¶€í„° ì¼ì • ê°œìˆ˜ì˜ `Sphere Trace`ë¥¼ ì¥ì• ë¬¼ ë°©í–¥ìœ¼ë¡œ ë°°ì¹˜í•œë‹¤.

```c++
for (int Index = 0; Index < LoopCount; ++Index)
{
	// ...

	if (Index == 0)
	{
		if (HitResult.bBlockingHit)
			FirstLedgeHitResult = HitResult;
	}
	else
	{
		if (HitResult.bBlockingHit)
			LastLedgeHitResult = HitResult;
		else
		{
			FVector LastLedgeStart = UDaredevilFunctionLibrary::NativeMoveVectorForward(LastLedgeHitResult.ImpactPoint, ReversedNormal, 20.f);
			FVector LastLedgeEnd = LastLedgeHitResult.ImpactPoint;

			FHitResult TempHitResult;

			UKismetSystemLibrary::SphereTraceSingle(GetWorld(), LastLedgeStart, LastLedgeEnd, 10.f,
				TraceTypeQuery1, false, ActorsToIgnore,
				bMeasureWallDrawDebug ? EDrawDebugTrace::ForOneFrame : EDrawDebugTrace::None, TempHitResult, true);

			if (TempHitResult.bBlockingHit)
				LastLedgeHitResult = TempHitResult;
			
			break;
		}
	}
}
```

ì—¬ê¸°ì„œ ì²« `Sphere Trace`ê°€ ì¶©ëŒí•˜ëŠ” ì§€ì ì´ ë°”ë¡œ **ì²« ëª¨ì„œë¦¬ ì§€ì **ì´ë‹¤. ê·¸ ë’¤ ë°˜ë³µë¬¸ì„ ëŒë©´ì„œ ì¶©ëŒì´ ì¼ì–´ë‚  ê²½ìš° ë§ˆì§€ë§‰ ëª¨ì„œë¦¬ ì •ë³´ë¡œ ê°±ì‹ í•´ì¤€ë‹¤. ë§Œì•½ ì¶©ëŒì´ ì¼ì–´ë‚˜ì§€ ì•Šì„ ê²½ìš°, í•´ë‹¹ `Sphere Trace`ëŠ” ì¥ì• ë¬¼ì— ì¶©ëŒë˜ì§€ ì•Šì•˜ìœ¼ë¯€ë¡œ ê°±ì‹ í•˜ì§€ ì•ŠëŠ”ë‹¤.

í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë˜ë©´ ë§ˆì§€ë§‰ ì¶©ëŒ ì§€ì ì€ ì •í™•í•œ ëª¨ì„œë¦¬ê°€ ì•„ë‹ˆê²Œ ëœë‹¤. ê·¸ë ‡ê¸°ì— `Sphere Trace`ê°€ ì¶©ëŒë˜ì§€ ì•ŠëŠ” ì‹œì ì— (ë§ˆì§€ë§‰ ì¶©ëŒ ìœ„ì¹˜ë³´ë‹¤ ë’¤ìª½ - ë§ˆì§€ë§‰ ì¶©ëŒ ìœ„ì¹˜)ë§Œí¼ `Sphere Trace`ë¥¼ ìˆ˜í–‰í•˜ì—¬ ì •í™•í•œ ëª¨ì„œë¦¬ ì§€ì ì„ í™•ì¸í•œë‹¤.

![](/assets/img/post/Daredevil/Parkour/sphere_trace_depth.png){: width="600" height="400" }
_DrawDebugSphereë¥¼ ì´ìš©í•´ ëª¨ì„œë¦¬ ì§€ì ì„ í‘œì‹œí–ˆë‹¤_

ì´ë ‡ê²Œ ì¥ì• ë¬¼ì˜ ë†’ì´ì™€ í­ì„ êµ¬í•  ìˆ˜ ìˆê²Œ ëë‹¤. ì´ë¥¼ ì´ìš©í•´ ì¥ì• ë¬¼ì— ë”°ë¥¸ íŒŒì¿ ë¥´ ì•¡ì…˜ì„ ì§€ì •í•˜ì—¬ ìˆ˜í–‰í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

## ğŸ’¡ ìƒˆë¡­ê²Œ ë°°ìš´ ì 

- ì—¬ëŸ¬ íŠ¸ë ˆì´ìŠ¤ë¥¼ í†µí•œ ì˜¤ë¸Œì íŠ¸ ì •ë³´ ì¶”ì¶œ

## ğŸš€ ë‹¤ìŒ ëª©í‘œ

- ì¥ì• ë¬¼ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒŒì¿ ë¥´ ìˆ˜í–‰

## ì°¸ê³ 

[ì·¨ë¯¸ë¡œ ì–¸ë¦¬ì–¼(Unreal as a hobby)::íŒŒì¿ ë¥´ ì‹œìŠ¤í…œ](https://youtu.be/N2A5hjpVx9k?si=XLH3Iog7UlN-yT3a)